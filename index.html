<!DOCTYPE html>
<html>
    <head>
        <!-- App stuff -->
        <link rel="stylesheet" href="css/app.css" />
        <link href="css/bootstrap.css" rel="stylesheet">
        <link href="css/kendo.mobile.all.min.css" rel="stylesheet" type="text/css" />
        <link href="css/style.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div data-role="layout" data-id="main-layout">

        </div>

        <div data-role="layout" data-id="back-layout">
            <header data-role="header">
                <div data-role="navbar">
                    <a id="backbutton" class="nav-button" data-align="left" data-role="backbutton">
                        <img src="images/back-icon.png" width="32" height="32"/>
                    </a>

                    <span class="white">Ship It!</span>&nbsp;<span class="blue">NICE</span>
                </div>

            </header>
        </div>

        <div id="login-view"  data-role="view" data-title="Ship It! NICE Voting" data-model="mainModel">
            <img class="center" src="images/login.png" style="margin-bottom: 10px"/>
            <div class="center">
                <input class="login-input" type="text" data-style="inset" id="username" placeholder="Email Address" style="height: 36px; width: 90%"/>
                <input class="login-input" type="password" data-style="inset" id="password" placeholder="Employee Badge Number" style="height: 36px; width: 90%"/>
                <a class="login-button blue-button" data-role="button" data-bind="click: login" style="padding-top: 4px;padding-bottom: 1px; height: 36px;width: 90%"><b>Login</b></a><br />
            </div>
            <img class="center" src="images/nicelogo-white.png"/>
            <div class="cd-popup" role="alert">
                <div class="cd-popup-container">
                    <div class="popup-content">
                        <p>Join us at the end of Ship it day to see who won!</p>
                    </div>
                    <div class="popup-button-options">
                        <span class="btn-close-popup" style="color: #76b6b0;cursor: pointer; cursor: hand;">CLOSE</span>
                    </div>
                </div> <!-- cd-popup-container -->
            </div> <!-- cd-popup -->
        </div>

        <div class="no-back" data-role="view" id="projects-view" data-title="Select A Project" data-layout="main-layout" data-model="mainModel">
            <header data-role="header">
                <div data-role="navbar" style="box-shadow: 5px 5px 5px #888888;margin-bottom:5px;">
                    <img src="images/logo.png" width="60px"/>
                </div>
                <div style="background-color: #f6f6f6; color: #868686;padding-top:12px;padding-bottom:12px;">
                    <span style="padding-left: 10px;">Drag and drop to order the projects by rank</span>

                </div>
                <hr style="color: #f6f6f6; margin: 0px; "/>
            </header>
            <ul data-role="listview" data-style="inset" data-type="group" data-template="item-template" data-source="projectsDataSource"  id="projectsTable" style="margin-top: 10px;padding-bottom: 20px">
            </ul>
            <div id="submit-footer" data-role="footer" data-position="fixed" style="background-color:#f6f6f6;text-align:center;">
                <a class="login-button blue-button" data-role="button" data-bind="click: submitVote" style="padding-top: 4px;padding-bottom: 1px;margin-top: 10px;margin-bottom: 10px; height: 36px; width: 90%"><b>Submit Your Vote!</b></a><br />


            </div>

        </div>

        <div class="no-back" data-role="view" data-title="Thank You" id="voted-view" data-model="mainModel" data-layout="back-layout">
            <h1 id="thankYou">Thank you for voting</h1>
            <p>
                Join us at the end of Ship It! day to see who won.
            </p>
        </div>

        <div class="cd-popup" role="alert" id="cd-popup-and-reset" style="z-index:9999;">
            <div class="cd-popup-container">
                <div class="popup-content">
                    <p>Join us at the end of Ship it day to see who won!</p>
                </div>
                <div class="popup-button-options" id="btn-close-popup-and-reset">
                    <span class="btn-close-popup-and-reset" style="color: #76b6b0;cursor: pointer; cursor: hand;">CLOSE</span>
                </div>
            </div> <!-- cd-popup-container -->
        </div> <!-- cd-popup -->

        <script type="text/x-kendo-template" id="item-template">
            <div class="item-info" id="{project_code}" style="position: relative">
                <img class="project-icon" src="images/grip.png" height="15px" width="15px"
                style="position: absolute;top: 30%;"/>
                <div class="item-details">
                    <h3 style="margin: 0px;">${project_name}</h3>
                </div>
            </div>
        </script>

        <script src="js/jquery.min.js"></script>
        <script src="js/kendo.all.min.js"></script>
        <script src="js/app.js"></script>
        <script>
            $(document).ready(function() {
                $("#projectsTable").kendoSortable({
                    hint:function(element) {
                        return element.clone().addClass("hint");
                    },
                    placeholder:function(element) {
                        return element.clone().addClass("placeholder").html('<img style="margin-left: 10px; margin-top: 12px; margin-bottom: 12px;" class="project-icon" src="images/grip.png" height="15px" width="15px" />');
                    },
                    disabled: ".disabled",
                    ignore: "h3"
                    //holdToDrag: true
                });

                $('.cd-popup-trigger').on('click', function(event){
                    event.preventDefault();
                    $('.cd-popup').addClass('is-visible');
                });
                
                //close popup
                $('.cd-popup').on('click', function(event){
                    if( $(event.target).is('.cd-popup-close') || $(event.target).is('.cd-popup') ) {
                        event.preventDefault();
                        $(this).removeClass('is-visible');
                    }
                });

                $('.btn-close-popup').on('click', function(event){
                    $('.cd-popup').removeClass('is-visible');
                });


                $('#btn-close-popup-and-reset').on('click', function(event){
                    $('.cd-popup').removeClass('is-visible');
                    mainModel.reset();
                });

                $('#cd-popup-and-reset').on('click', function(event){
                    $('.cd-popup').removeClass('is-visible');
                    mainModel.reset();
                });

            });

            function afterShow(e) {
                alert(e.view);
            }
        </script>
    </body>
</html>
